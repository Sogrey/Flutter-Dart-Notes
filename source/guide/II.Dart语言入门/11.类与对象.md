# 类与对象

面向对象编程（OOP）d的三个基本特征：封装、继承、多态

Dart所有的东西皆为对象，所有对象继承自Object类。

Dart是一门使用类和单继承的面向对象语言，所有对象都是类的示例，并且所有类都是Object的子类。

一个类通常有属性及方法组成。

``` dart
class Person {
  String name;
  int age;

  void setName(String name) {
    this.name = name;
  }

  String getName() {
    return this.name;
  }

  void setAge(int age) {
    this.age = age;
  }

  int getAge() {
    return this.age;
  }
}

main() {
  var p = new Person();
  p.setName('Sogrey');
  print(p.getName());//Sogrey
  p.age = 30;
  print(p.getAge());//30
}
```
## 构造函数

像Java一样，类的构造函数：

``` dart
  Person([String name,int age]){//[]内为可选参数
    print('构造方法，实例化时自动触发');
    this.name = name;
    this.age = age;
  }
```
更简洁,与上同效：
``` dart
  Person([this.name,this.age]);
```

## 命名构造函数

``` dart
  Person.work(){
    print('命名构造函数');
  }

  var work = new Person.work();
```

## 引入外部类

`import`关键字

``` dart
import 'lib/Person.dart';

main() {
  var p = new Person();
  p.setName('Sogrey');
  print(p.getName());
  p.age = 30;
  print(p.getAge());
}
```

Person.dart:
``` dart
class Person {
  String name;
  int age;

  // Person([String name,int age]){
  //   print('构造方法，实例化时自动触发');
  //   this.name = name;
  //   this.age = age;
  // }

  Person([this.name,this.age]);

  Person.work(){
    print('命名构造函数');
  }

  void setName(String name) {
    this.name = name;
  }

  String getName() {
    return this.name;
  }

  void setAge(int age) {
    this.age = age;
  }

  int getAge() {
    return this.age;
  }
}
```

## 私有变量、属性

变量前加下划线`_`.

私有属性外部不能访问，只能在当前类内访问。

如何访问私有属性，定义一个共有的方法，返回该私有属性。私有方法一样。

## getter/setter 方法

``` dart
class Rect {
  num height;
  num width;
  Rect(this.width, this.height);
  // num area(){
  //   return this.width*this.height;
  // }
  //简写
  get area {
    return this.width * this.height;
  }

  //Setters should declare exactly one required parameter.
  //Setters应该只声明一个必需的参数。
  set areaWidth(num width) {
    this.width = width;
  }

  set areaHeight(num height) {
    this.height = height;
  }
}

main() {
  var r = new Rect(20, 2);
  // print(r.area());
  print(r.area);//40

  r.areaWidth = 20;
  r.areaHeight = 10;
  print(r.area);//200
}
```

## 实例化之前做些事

``` dart
class Rect {
  num height;
  num width;

  // 实例化之前做些事（ 给属性赋默认值 ）
  Rect():width=2, height=20{

  }

  // num area(){
  //   return this.width*this.height;
  // }
  //简写
  get area {
    return this.width * this.height;
  }

  //Setters should declare exactly one required parameter.
  //Setters应该只声明一个必需的参数。
  set areaWidth(num width) {
    this.width = width;
  }

  set areaHeight(num height) {
    this.height = height;
  }
}

main() {
  var r0 = new Rect();
  print(r0.area);//40
}
```

## 静态成员

1. 使用`static`关键字修饰
2. 静态方法不能访问非静态成员，非静态方法可以访问静态成员。

``` dart
//静态成员

class Animal {
  static String type = 'Animal';
  static String name = 'Dog';
  static String getName() {
    return name;
  }

  void setName(n) {
    name = n;
  }
}
main() {
  var a = new Animal();
  a.setName('Cat');
  print(Animal.getName());//Cat
}
```

## 操作符

- `?`条件运算符
- `as`类型转换
- `is`类型判断
- `..`级联操作(链式调用)

``` dart
  String aa=null;

  // print(aa.indexOf('a'));
  // Unhandled exception:
  // NoSuchMethodError: The method 'indexOf' was called on null.
  // Receiver: null
  // Tried calling: indexOf("a")

  print(aa?.indexOf('a'));//null

  var a = new Animal();
  if(a is Animal){
    print('a is Animal');
  }

  (a as Animal).setName('Fish');


  class Person {
    String name;
    int age;
    String sex;

    String getInfo() {
      return 'My name is ${this.name},${this.sex},${this.age},${this.age}';
    }
  }
  Person pp = new Person();
  pp
    ..name = 'Sogrey'
    ..age = 31
    ..sex = '男';

  print(pp.getInfo());

  //My name is Sogrey,男,31 years old.

```

## 类的继承

Dart中类的继承：

1. 子类使用`extends`关键字来继承父类
2. 子类会继承父类里面可见的属性和方法，但是不会继承构造函数
3. 子类能覆写父类的方法 getter和setter

``` dart
class Person {
  String name;
  int age;
  String sex;

  Person([this.name, this.age]);
  void setName(String name) {
    this.name = name;
  }
}
class Child extends Person{

  Child(String name,int age,String sex):super(name,age){
    this.sex = sex;
  }
  //覆写父类方法
  void setName(String name) {
    this.name ='Child\'s ${name}';
  }
}

Child c = new Child('张三', 12,'男');
print(c.getInfo());
//My name is 张三,男,12 years old.
c.setName('李四');
print(c.getInfo());
//My name is Child's 李四,男,12 years old.
```

## 抽象类

## 多态

## 接口